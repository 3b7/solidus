// comment line necessary for correct interpolation of use_turbolinks
Turbolinks.supported = <%= Spree::Backend::Config.use_turbolinks %>;

Spree.jQueryReady = $.fn.ready;

// override jQuery.ready to use Spree.ready even if it was not used explicitly
$.fn.ready = function (callback) {
  console.warn("jQuery.ready() is deprecated. Use Spree.ready() instead. Called from:", callback );
  Spree.ready(callback);
};

Spree.ready = function(callback) {
  if (Turbolinks.supported) {
    jQuery(document).on('turbolinks:load', function() {
      callback(jQuery);
    });
  } else {
    Spree.jQueryReady(callback);
  }
};
